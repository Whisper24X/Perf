{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport VueApexCharts from 'vue3-apexcharts';\nexport default {\n  name: 'DeviceDetails',\n  components: {\n    apexchart: VueApexCharts\n  },\n  data() {\n    return {\n      deviceData: null,\n      devicePerfInfo: null,\n      chartOptions: {\n        chart: {\n          type: 'line',\n          height: 350\n        },\n        xaxis: {\n          type: 'datetime'\n        },\n        title: {\n          text: '设备性能信息',\n          align: 'left'\n        },\n        series: []\n      },\n      series: []\n    };\n  },\n  created() {\n    this.deviceData = {\n      device_name: this.$route.query.device_name,\n      other_field: this.$route.query.other_field\n    };\n    this.fetchDevicePerfInfo();\n  },\n  methods: {\n    fetchDevicePerfInfo() {\n      const payload = {\n        device_name: this.deviceData.device_name,\n        other_field: this.deviceData.other_field\n      };\n      axios.post('http://127.0.0.1:5000/view_device_perf_info', payload).then(response => {\n        this.devicePerfInfo = response.data;\n        this.processChartData();\n      }).catch(error => {\n        console.error(\"获取设备性能信息出错:\", error);\n      });\n    },\n    processChartData() {\n      const cpuSeries = [];\n      const fpsSeries = [];\n      const memSeries = [];\n      this.devicePerfInfo.forEach(data => {\n        const dateTime = new Date(data.created_at).getTime();\n        cpuSeries.push({\n          x: dateTime,\n          y: data.total_cpu\n        });\n        fpsSeries.push({\n          x: dateTime,\n          y: data.total_fps\n        });\n        memSeries.push({\n          x: dateTime,\n          y: data.total_mem\n        });\n      });\n      this.series = [{\n        name: 'CPU',\n        data: cpuSeries\n      }, {\n        name: 'FPS',\n        data: fpsSeries\n      }, {\n        name: 'Memory',\n        data: memSeries\n      }];\n    }\n  }\n};","map":{"version":3,"names":["axios","VueApexCharts","name","components","apexchart","data","deviceData","devicePerfInfo","chartOptions","chart","type","height","xaxis","title","text","align","series","created","device_name","$route","query","other_field","fetchDevicePerfInfo","methods","payload","post","then","response","processChartData","catch","error","console","cpuSeries","fpsSeries","memSeries","forEach","dateTime","Date","created_at","getTime","push","x","y","total_cpu","total_fps","total_mem"],"sources":["/Users/yangcong/性能/Perf/frontend/my-vue-app/src/components/DeviceDetails.vue"],"sourcesContent":["<template>\n    <div>\n        <h1>设备详情</h1>\n        <p v-if=\"deviceData\">\n            <strong>设备名称：</strong> {{ deviceData.device_name }}\n        </p>\n        <p v-if=\"deviceData\">\n            <strong>其他字段：</strong> {{ deviceData.other_field }}\n        </p>\n        <p v-else>\n            加载中...\n        </p>\n        <div v-if=\"devicePerfInfo\">\n            <h2>API 响应</h2>\n            <pre>{{ devicePerfInfo }}</pre>\n        </div>\n    </div>\n    <div class=\"card\">\n        <div class=\"card-body\">\n            <apexchart type=\"line\" height=\"350\" :options=\"chartOptions\" :series=\"series\"></apexchart>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport VueApexCharts from 'vue3-apexcharts';\n\nexport default {\n    name: 'DeviceDetails',\n    components: {\n        apexchart: VueApexCharts\n    },\n    data() {\n        return {\n            deviceData: null,\n            devicePerfInfo: null,\n            chartOptions: {\n                chart: {\n                    type: 'line',\n                    height: 350\n                },\n                xaxis: {\n                    type: 'datetime'\n                },\n                title: {\n                    text: '设备性能信息',\n                    align: 'left'\n                },\n                series: []\n            },\n            series: []\n        };\n    },\n    created() {\n        this.deviceData = {\n            device_name: this.$route.query.device_name,\n            other_field: this.$route.query.other_field\n        };\n\n        this.fetchDevicePerfInfo();\n    },\n    methods: {\n        fetchDevicePerfInfo() {\n            const payload = {\n                device_name: this.deviceData.device_name,\n                other_field: this.deviceData.other_field\n            };\n\n            axios.post('http://127.0.0.1:5000/view_device_perf_info', payload)\n                .then(response => {\n                    this.devicePerfInfo = response.data;\n                    this.processChartData();\n                })\n                .catch(error => {\n                    console.error(\"获取设备性能信息出错:\", error);\n                });\n        },\n        processChartData() {\n            const cpuSeries = [];\n            const fpsSeries = [];\n            const memSeries = [];\n\n            this.devicePerfInfo.forEach(data => {\n                const dateTime = new Date(data.created_at).getTime();\n                cpuSeries.push({ x: dateTime, y: data.total_cpu });\n                fpsSeries.push({ x: dateTime, y: data.total_fps });\n                memSeries.push({ x: dateTime, y: data.total_mem });\n            });\n\n            this.series = [\n                {\n                    name: 'CPU',\n                    data: cpuSeries\n                },\n                {\n                    name: 'FPS',\n                    data: fpsSeries\n                },\n                {\n                    name: 'Memory',\n                    data: memSeries\n                }\n            ];\n        }\n    }\n};\n</script>\n\n<style scoped>\nh1 {\n    color: #42b983;\n}\n</style>\n"],"mappings":";AAyBA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,aAAY,MAAO,iBAAiB;AAE3C,eAAe;EACXC,IAAI,EAAE,eAAe;EACrBC,UAAU,EAAE;IACRC,SAAS,EAAEH;EACf,CAAC;EACDI,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,UAAU,EAAE,IAAI;MAChBC,cAAc,EAAE,IAAI;MACpBC,YAAY,EAAE;QACVC,KAAK,EAAE;UACHC,IAAI,EAAE,MAAM;UACZC,MAAM,EAAE;QACZ,CAAC;QACDC,KAAK,EAAE;UACHF,IAAI,EAAE;QACV,CAAC;QACDG,KAAK,EAAE;UACHC,IAAI,EAAE,QAAQ;UACdC,KAAK,EAAE;QACX,CAAC;QACDC,MAAM,EAAE;MACZ,CAAC;MACDA,MAAM,EAAE;IACZ,CAAC;EACL,CAAC;EACDC,OAAOA,CAAA,EAAG;IACN,IAAI,CAACX,UAAS,GAAI;MACdY,WAAW,EAAE,IAAI,CAACC,MAAM,CAACC,KAAK,CAACF,WAAW;MAC1CG,WAAW,EAAE,IAAI,CAACF,MAAM,CAACC,KAAK,CAACC;IACnC,CAAC;IAED,IAAI,CAACC,mBAAmB,CAAC,CAAC;EAC9B,CAAC;EACDC,OAAO,EAAE;IACLD,mBAAmBA,CAAA,EAAG;MAClB,MAAME,OAAM,GAAI;QACZN,WAAW,EAAE,IAAI,CAACZ,UAAU,CAACY,WAAW;QACxCG,WAAW,EAAE,IAAI,CAACf,UAAU,CAACe;MACjC,CAAC;MAEDrB,KAAK,CAACyB,IAAI,CAAC,6CAA6C,EAAED,OAAO,EAC5DE,IAAI,CAACC,QAAO,IAAK;QACd,IAAI,CAACpB,cAAa,GAAIoB,QAAQ,CAACtB,IAAI;QACnC,IAAI,CAACuB,gBAAgB,CAAC,CAAC;MAC3B,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK;QACZC,OAAO,CAACD,KAAK,CAAC,aAAa,EAAEA,KAAK,CAAC;MACvC,CAAC,CAAC;IACV,CAAC;IACDF,gBAAgBA,CAAA,EAAG;MACf,MAAMI,SAAQ,GAAI,EAAE;MACpB,MAAMC,SAAQ,GAAI,EAAE;MACpB,MAAMC,SAAQ,GAAI,EAAE;MAEpB,IAAI,CAAC3B,cAAc,CAAC4B,OAAO,CAAC9B,IAAG,IAAK;QAChC,MAAM+B,QAAO,GAAI,IAAIC,IAAI,CAAChC,IAAI,CAACiC,UAAU,CAAC,CAACC,OAAO,CAAC,CAAC;QACpDP,SAAS,CAACQ,IAAI,CAAC;UAAEC,CAAC,EAAEL,QAAQ;UAAEM,CAAC,EAAErC,IAAI,CAACsC;QAAU,CAAC,CAAC;QAClDV,SAAS,CAACO,IAAI,CAAC;UAAEC,CAAC,EAAEL,QAAQ;UAAEM,CAAC,EAAErC,IAAI,CAACuC;QAAU,CAAC,CAAC;QAClDV,SAAS,CAACM,IAAI,CAAC;UAAEC,CAAC,EAAEL,QAAQ;UAAEM,CAAC,EAAErC,IAAI,CAACwC;QAAU,CAAC,CAAC;MACtD,CAAC,CAAC;MAEF,IAAI,CAAC7B,MAAK,GAAI,CACV;QACId,IAAI,EAAE,KAAK;QACXG,IAAI,EAAE2B;MACV,CAAC,EACD;QACI9B,IAAI,EAAE,KAAK;QACXG,IAAI,EAAE4B;MACV,CAAC,EACD;QACI/B,IAAI,EAAE,QAAQ;QACdG,IAAI,EAAE6B;MACV,EACH;IACL;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}