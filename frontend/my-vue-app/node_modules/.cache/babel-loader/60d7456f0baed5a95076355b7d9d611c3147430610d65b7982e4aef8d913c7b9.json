{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-60515d0c\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"设备性能数据\", -1 /* HOISTED */));\nconst _hoisted_2 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_apexchart = _resolveComponent(\"apexchart\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\" <div>\\n        <h1>设备详情</h1>\\n        <p v-if=\\\"deviceData\\\">\\n            <strong>设备名称：</strong> {{ deviceData.device_name }}\\n        </p>\\n        <p v-if=\\\"deviceData\\\">\\n            <strong>其他字段：</strong> {{ deviceData.other_field }}\\n        </p>\\n        <p v-else>\\n            加载中...\\n        </p>\\n    </div> \"), _createElementVNode(\"div\", null, [_hoisted_1, $data.devicePerfInfo ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_component_apexchart, {\n    type: \"area\",\n    height: \"350\",\n    options: $data.chartOptions,\n    series: $data.series\n  }, null, 8 /* PROPS */, [\"options\", \"series\"])])) : _createCommentVNode(\"v-if\", true)])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","key","_createElementBlock","_Fragment","_createCommentVNode","_hoisted_1","$data","devicePerfInfo","_hoisted_2","_createVNode","_component_apexchart","type","height","options","chartOptions","series"],"sources":["/Users/yangcong/性能/Perf/frontend/my-vue-app/src/components/DeviceDetails.vue"],"sourcesContent":["<template>\n    <!-- <div>\n        <h1>设备详情</h1>\n        <p v-if=\"deviceData\">\n            <strong>设备名称：</strong> {{ deviceData.device_name }}\n        </p>\n        <p v-if=\"deviceData\">\n            <strong>其他字段：</strong> {{ deviceData.other_field }}\n        </p>\n        <p v-else>\n            加载中...\n        </p>\n    </div> -->\n    <div>\n        <h2>设备性能数据</h2>\n        <div v-if=\"devicePerfInfo\">\n            <apexchart type=\"area\" height=\"350\" :options=\"chartOptions\" :series=\"series\"></apexchart>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport VueApexCharts from 'vue3-apexcharts';\n\nexport default {\n    name: 'DeviceDetails',\n    components: {\n        apexchart: VueApexCharts\n    },\n    data() {\n        return {\n            deviceData: null,\n            devicePerfInfo: null,\n            chartOptions: {\n                chart: {\n                    type: 'area',\n                    height: 350,\n                    animations: {\n                        enabled: true,\n                        easing: 'linear',\n                        dynamicAnimation: {\n                            speed: 1000\n                        }\n                    },\n                },\n                \n                xaxis: {\n                    type: 'datetime',\n                    labels: {\n                        format: 'yyyy-MM-dd HH:mm:ss',\n                        style: {\n                            color: '#fff',\n                        }\n                       \n                    },\n                    title: {\n                        text: '时间',\n                        style: {\n                            color: '#fff'\n                        }\n                    }\n                },\n                tooltip: {\n                    enabled: true,\n                    x: {\n                        format: 'yyyy-MM-dd HH:mm:ss'\n                    }\n                },\n                title: {\n                    text: 'CPU',\n                    align: 'left'\n                },\n                stroke: {\n                    width: 2\n                },\n                series: []\n            },\n            series: []\n        };\n    },\n    created() {\n        this.deviceData = {\n            device_name: this.$route.query.device_name,\n            other_field: this.$route.query.other_field\n        };\n\n        this.fetchDevicePerfInfo();\n    },\n    methods: {\n        fetchDevicePerfInfo() {\n            const payload = {\n                device_name: this.deviceData.device_name,\n                other_field: this.deviceData.other_field\n            };\n\n            axios.post('http://127.0.0.1:5000/get_cpu_info', payload)\n                .then(response => {\n                    //console.log(\"API response:\", response.data); \n                    this.devicePerfInfo = response.data;\n                    this.processChartData();\n                    // console.log(this.devicePerfInfo)\n                })\n                .catch(error => {\n                    console.error(\"获取设备性能信息出错:\", error);\n                });\n        },\n        processChartData() {\n\n            const cpuSeries = this.devicePerfInfo.map(data => ({\n                x: new Date(data.recorded_at + ' UTC').getTime(), // 加上 ' UTC' 以确保时间戳被解释为UTC时间\n                y: data.device_cpu_rate\n            }));\n\n\n            this.series = [{\n                name: 'CPU Rate',\n                data: cpuSeries\n            }];\n        }\n    }\n};\n</script>\n\n<style scoped>\nh1 {\n    color: #42b983;\n}\n</style>\n"],"mappings":";;gEAcQA,mBAAA,CAAe,YAAX,QAAM;;EAdlBC,GAAA;AAAA;;;uBAAAC,mBAAA,CAAAC,SAAA,SACIC,mBAAA,oUAWU,EACVJ,mBAAA,CAKM,cAJFK,UAAe,EACJC,KAAA,CAAAC,cAAc,I,cAAzBL,mBAAA,CAEM,OAjBdM,UAAA,GAgBYC,YAAA,CAAyFC,oBAAA;IAA9EC,IAAI,EAAC,MAAM;IAACC,MAAM,EAAC,KAAK;IAAEC,OAAO,EAAEP,KAAA,CAAAQ,YAAY;IAAGC,MAAM,EAAET,KAAA,CAAAS;sDAhBjFX,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}