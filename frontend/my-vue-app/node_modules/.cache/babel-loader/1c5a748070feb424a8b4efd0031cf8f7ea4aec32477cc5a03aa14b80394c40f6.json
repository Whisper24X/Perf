{"ast":null,"code":"import axios from 'axios';\nimport VueApexCharts from 'vue3-apexcharts';\nexport default {\n  name: 'DeviceDetails',\n  components: {\n    apexchart: VueApexCharts\n  },\n  data() {\n    return {\n      deviceData: null,\n      devicePerfInfo: null,\n      chartOptions: {\n        chart: {\n          id: \"main-chart\",\n          type: \"line\",\n          height: 350,\n          animations: {\n            enabled: true,\n            easing: \"linear\",\n            dynamicAnimation: {\n              speed: 1000\n            }\n          },\n          zoom: {\n            type: \"x\",\n            enabled: true,\n            autoScaleYaxis: true\n          },\n          toolbar: {\n            autoSelected: \"zoom\"\n          }\n        },\n        stroke: {\n          width: 3 // 设置线条的粗细\n        },\n        xaxis: {\n          type: \"datetime\",\n          labels: {\n            format: \"yyyy-MM-dd HH:mm:ss\"\n          },\n          // 默认显示的时间范围（毫秒），例如：90天\n          range: 7776000000\n        },\n        title: {\n          text: \"设备性能信息\",\n          align: \"left\"\n        },\n        series: []\n      },\n      sliderChartOptions: {\n        chart: {\n          id: \"slider-chart\",\n          height: 150,\n          type: \"area\",\n          brush: {\n            target: \"main-chart\",\n            enabled: true\n          },\n          selection: {\n            enabled: true,\n            xaxis: {\n              min: new Date().getTime() - 30 * 24 * 60 * 60 * 1000,\n              // 默认选择最近30天\n              max: new Date().getTime()\n            }\n          }\n        },\n        xaxis: {\n          type: \"datetime\",\n          labels: {\n            format: \"yyyy-MM-dd HH:mm:ss\"\n          }\n        },\n        stroke: {\n          width: 2\n        },\n        series: []\n      },\n      series: []\n    };\n  },\n  created() {\n    this.deviceData = {\n      device_name: this.$route.query.device_name,\n      other_field: this.$route.query.other_field\n    };\n    this.fetchDevicePerfInfo();\n  },\n  methods: {\n    fetchDevicePerfInfo() {\n      const payload = {\n        device_name: this.deviceData.device_name,\n        other_field: this.deviceData.other_field\n      };\n      axios.post('http://127.0.0.1:5000/get_cpu_info', payload).then(response => {\n        //console.log(\"API response:\", response.data); \n        this.devicePerfInfo = response.data;\n        this.processChartData();\n        // console.log(this.devicePerfInfo)\n      }).catch(error => {\n        console.error(\"获取设备性能信息出错:\", error);\n      });\n    },\n    processChartData() {\n      const cpuSeries = this.devicePerfInfo.map(data => ({\n        x: new Date(data.recorded_at + ' UTC').getTime(),\n        // 加上 ' UTC' 以确保时间戳被解释为UTC时间\n        y: data.device_cpu_rate\n      }));\n      this.series = [{\n        name: 'CPU Rate',\n        data: cpuSeries\n      }];\n    }\n  }\n};","map":{"version":3,"names":["axios","VueApexCharts","name","components","apexchart","data","deviceData","devicePerfInfo","chartOptions","chart","id","type","height","animations","enabled","easing","dynamicAnimation","speed","zoom","autoScaleYaxis","toolbar","autoSelected","stroke","width","xaxis","labels","format","range","title","text","align","series","sliderChartOptions","brush","target","selection","min","Date","getTime","max","created","device_name","$route","query","other_field","fetchDevicePerfInfo","methods","payload","post","then","response","processChartData","catch","error","console","cpuSeries","map","x","recorded_at","y","device_cpu_rate"],"sources":["/Users/yangcong/性能/Perf/frontend/my-vue-app/src/components/DeviceDetails.vue"],"sourcesContent":["<template>\n    <div>\n        <h1>设备详情</h1>\n        <p v-if=\"deviceData\">\n            <strong>设备名称：</strong> {{ deviceData.device_name }}\n        </p>\n        <p v-if=\"deviceData\">\n            <strong>其他字段：</strong> {{ deviceData.other_field }}\n        </p>\n        <p v-else>\n            加载中...\n        </p>\n    </div>\n    <div class=\"card\">\n        <h2>设备性能数据</h2>\n        <div class=\"card-body\" v-if=\"devicePerfInfo\">\n            <apexchart type=\"line\" height=\"350\" :options=\"chartOptions\" :series=\"series\"></apexchart>\n            <apexchart\n          type=\"area\"\n          height=\"150\"\n          :options=\"sliderChartOptions\"\n          :series=\"series\"\n        ></apexchart>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport VueApexCharts from 'vue3-apexcharts';\n\nexport default {\n    name: 'DeviceDetails',\n    components: {\n        apexchart: VueApexCharts\n    },\n    data() {\n    return {\n      deviceData: null,\n      devicePerfInfo: null,\n      chartOptions: {\n        chart: {\n          id: \"main-chart\",\n          type: \"line\",\n          height: 350,\n          animations: {\n            enabled: true,\n            easing: \"linear\",\n            dynamicAnimation: {\n              speed: 1000,\n            },\n          },\n          zoom: {\n            type: \"x\",\n            enabled: true,\n            autoScaleYaxis: true,\n          },\n          toolbar: {\n            autoSelected: \"zoom\",\n          },\n        },\n        stroke: {\n          width: 3, // 设置线条的粗细\n        },\n        xaxis: {\n          type: \"datetime\",\n          labels: {\n            format: \"yyyy-MM-dd HH:mm:ss\",\n          },\n          // 默认显示的时间范围（毫秒），例如：90天\n          range: 7776000000,\n        },\n        title: {\n          text: \"设备性能信息\",\n          align: \"left\",\n        },\n        series: [],\n      },\n      sliderChartOptions: {\n        chart: {\n          id: \"slider-chart\",\n          height: 150,\n          type: \"area\",\n          brush: {\n            target: \"main-chart\",\n            enabled: true,\n          },\n          selection: {\n            enabled: true,\n            xaxis: {\n              min: new Date().getTime() - 30 * 24 * 60 * 60 * 1000, // 默认选择最近30天\n              max: new Date().getTime(),\n            },\n          },\n        },\n        xaxis: {\n          type: \"datetime\",\n          labels: {\n            format: \"yyyy-MM-dd HH:mm:ss\",\n          },\n        },\n        stroke: {\n          width: 2,\n        },\n        series: [],\n      },\n      series: [],\n    };\n  },\n    created() {\n        this.deviceData = {\n            device_name: this.$route.query.device_name,\n            other_field: this.$route.query.other_field\n        };\n\n        this.fetchDevicePerfInfo();\n    },\n    methods: {\n        fetchDevicePerfInfo() {\n            const payload = {\n                device_name: this.deviceData.device_name,\n                other_field: this.deviceData.other_field\n            };\n\n            axios.post('http://127.0.0.1:5000/get_cpu_info', payload)\n                .then(response => {\n                    //console.log(\"API response:\", response.data); \n                    this.devicePerfInfo = response.data;\n                    this.processChartData();\n                    // console.log(this.devicePerfInfo)\n                })\n                .catch(error => {\n                    console.error(\"获取设备性能信息出错:\", error);\n                });\n        },\n        processChartData() {\n\n            const cpuSeries = this.devicePerfInfo.map(data => ({\n                x: new Date(data.recorded_at + ' UTC').getTime(), // 加上 ' UTC' 以确保时间戳被解释为UTC时间\n                y: data.device_cpu_rate\n            }));\n\n\n            this.series = [{\n                name: 'CPU Rate',\n                data: cpuSeries\n            }];\n        }\n    }\n};\n</script>\n\n<style scoped>\nh1 {\n    color: #42b983;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}